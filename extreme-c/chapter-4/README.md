#### СОДЕРЖАНИЕ

```
src-0 - пример для исследования памяти процесса;
src-1 - пример для исследования процесса в фоновом режиме.
```

#### Структура памяти процесса

Память типичного процесса делится на несколько частей, которые называются
сегментами. Каждый из них представляет собой область памяти с определенной
задачей, предназначенную для хранения данных конкретного типа. 
Ниже приведен список сегментов, из которых состоит память активного процесса:
- сегмент неинициализированных данных или BSS (block started by symbol —
блок, начинающийся с символа);
- сегмент данных;
- текстовый сегмент или сегмент кода;
- сегмент стека;
- сегмент кучи.

Процесс — динамическая сущность, выполняемая внутри операционной системы,
в то время как исполняемый объектный файл — просто набор данных с подготовленной 
начальной структурой, и на ее основе создается будущий процесс.

Некоторые сегменты в структуре памяти активного процесса берутся
непосредственно из исполняемого файла, а остальные создаются динамически во время его загрузки. 
Первые называют статической схемой размещения в памяти, а вторые — динамической.

Команда **size** позволяет просмотреть статические сегменты исполняемого объектного файла.
```
size file.out
```
Размер сегментом приводится в байтах.

#### Сегмент BSS

Block started by Symbol (блок, начинающийся с символа). Так обозначают области
памяти, зарезервированные для неинициализированных машинных слов. Сегмент
BSS фактически предназначен для хранения либо неинициализированных, либо
обнуленных глобальных переменных.

#### Сегмент Data

Сегмент Data предназначен для хранения инициализированных глобальных переменных 
с ненулевыми значениями.
```
objdump -s -j .data file.out
```
Параметры **-s** и **-j .data**: первый сообщает команде **objdump**
о том, что нужно вывести все содержимое заданной секции, а второй указывает
секцию **.data**.

#### Сегмент Text

В итоговый исполняемый файл записываются инструкции машинного уровня. 
Поскольку все машинные инструкции программы находятся в сегменте Text (или Code),
он должен находиться в исполняемом объектном файле — а именно, в его статической схеме размещения. 
Процессор извлекает эти инструкции и выполняет их во время работы процесса.

Команда objdump для вывода содержимого секции:
```
objdump -S file.o
```

#### Динамическая схема размещения в памяти

Динамическая схема размещения находится в памяти процесса и существует до
тех пор, пока он не завершится. Процедурой запуска исполняемого объектного
файла занимается программа под названием **загрузчик**. Он создает новый процесс
и его начальную схему размещения в памяти, которая должна быть динамической.
Для этого копируются сегменты, найденные в статической схеме размещения
исполняемого объектного файла. Затем к ним добавляется два новых сегмента.
И только после этого процесс может приступить к выполнению.

В памяти активного процесса должно быть пять сегментов, три из
которых копируются непосредственно из статической схемы размещения исполняемого 
объектного файла, а остальные два создаются с нуля и называются стеком
и кучей. Последние являются динамическими сегментами и существуют только
в период работы процесса. Это значит, вы не найдете никакого упоминания о них
в исполняемом объектном файле.

#### Отражение памяти

Запуск исполняемого файла в фоновом режиме:
```
./ file.out &
```
При этом в [ ] будет PID (Process ID)

Команда для принудительного завершения процесса:
```
kill -9 PID
```
Вывод содержимого процесса:
```
ls -l /proc/PID
```

Чтобы получить список отражений, нужно просмотреть содержимое файла **maps** в каталоге /proc/PID:
```
$ cat /proc/PID/maps
```
